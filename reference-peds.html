<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Pediatric Reference — NinjaText</title>
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <header class="topnav">
      <div class="nav-inner">
        <a class="nav-brand" href="index.html">NinjaText | Peds</a>
        <nav class="nav-links">
          <a href="index.html">Home</a>
          <a href="instructions.html">Instructions</a>
          <a href="precautions.html">Precautions</a>
          <a href="tools.html">Tools</a>
          <a href="reference.html">Reference</a>
          <a href="about.html">About</a>
        </nav>
      </div>
    </header>

    <main class="reference-page">
      <div class="reference-app" aria-label="Pediatric crash cart reference">
        <div class="reference-status">
          <span class="reference-status-title">Pediatric Reference</span>
          <span class="reference-status-pill">Ready</span>
        </div>
        <section class="reference-hero">
          <h1>Pediatric Crash Cart</h1>
          <p>Enter age and weight to auto-fill Broselow-style calculations, PALS doses, and ET-tube meds.</p>
        </section>

        <section class="pedi-reference" aria-label="Pediatric reference quick sheet">
          <div class="pedi-header">Pediatric Crash Cart Reference</div>
          <div class="pedi-controls">
            <label for="pedi-age-input">
              Age (years)
              <input id="pedi-age-input" type="number" min="0" step="0.1" placeholder="yrs" aria-describedby="age-helper">
            </label>
            <label for="pedi-weight-input">
              Patient weight (kg)
              <input id="pedi-weight-input" type="number" min="0" step="0.1" placeholder="kg" aria-describedby="weight-helper">
            </label>
          </div>
          <div id="age-helper" class="pedi-helper">Age powers the estimation formulas.</div>
          <div id="weight-helper" class="pedi-helper">Weight drives the mg/kg dosing math.</div>

          <div class="pedi-section">
            <h3>Pediatric Calculations</h3>
            <ul class="pedi-list">
              <li>
                <strong>Estimated Pedi Weight in kg:</strong>
                2 × age (years) + 8 →
                <span class="pedi-value" data-output="est-weight">--</span> kg
              </li>
              <li>
                <strong>Estimated Pediatric SBP:</strong>
                70 + 2 × age (years) →
                <span class="pedi-value" data-output="est-sbp">--</span> mmHg
              </li>
              <li>
                <strong>ET tube size (cuffed):</strong>
                age (years)/4 + 3 →
                <span class="pedi-value" data-output="et-cuffed">--</span> mm
              </li>
              <li>
                <strong>ET tube size (uncuffed):</strong>
                age (years)/4 + 4 →
                <span class="pedi-value" data-output="et-uncuffed">--</span> mm
              </li>
            </ul>
          </div>

          <div class="pedi-section">
            <h3>PALS Dosing</h3>
            <ul class="pedi-list">
              <li>
                <strong>Atropine 0.02 mg/kg up to 0.5 mg per dose:</strong>
                <span class="pedi-value" data-output="pals-atropine">--</span> mg
              </li>
              <li>
                <strong>Adenosine 0.1 mg/kg, then 0.2 mg/kg:</strong>
                <span class="pedi-value" data-output="pals-adenosine">-- / --</span> mg
              </li>
              <li>
                <strong>Epi (Code dose) 0.01 mg/kg (of 0.1 mg/mL) per IV/IO:</strong>
                <span class="pedi-value" data-output="pals-epi-code">--</span> mg
              </li>
              <li>
                <strong>Lidocaine 1 mg/kg:</strong>
                <span class="pedi-value" data-output="pals-lidocaine">--</span> mg
              </li>
              <li>
                <strong>Naloxone 0.1 mg/kg every 2-3 mins until response:</strong>
                <span class="pedi-value" data-output="pals-naloxone">--</span> mg
              </li>
            </ul>
          </div>

          <div class="pedi-section">
            <h3>ET Tube meds: LANE</h3>
            <div class="pedi-helper">
              <p>Instructions:</p>
              <ol class="pedi-instructions">
                <li>Give 2-3 × IV dose through ET, except for Epinephrine (×10 IV dose).</li>
                <li>Dilute med in 5 mL NS.</li>
                <li>Hold compressions, give dilute med, follow with 5 mL flush.</li>
                <li>Deliver 5 breaths after the flush.</li>
              </ol>
            </div>
            <ul class="pedi-list">
              <li>
                <strong>Lidocaine 2-3 mg/kg (IV is 1 mg/kg):</strong>
                <span class="pedi-value" data-output="lane-lidocaine">-- to --</span> mg
              </li>
              <li>
                <strong>Atropine 0.04-0.06 mg/kg (IV is 0.02 mg/kg):</strong>
                <span class="pedi-value" data-output="lane-atropine">-- to --</span> mg
              </li>
              <li>
                <strong>Naloxone 0.2-0.3 mg/kg (IV is 0.1 mg/kg):</strong>
                <span class="pedi-value" data-output="lane-naloxone">-- to --</span> mg
              </li>
              <li>
                <strong>Epinephrine 0.1 mg/kg:</strong>
                <span class="pedi-value" data-output="lane-epinephrine">--</span> mg
              </li>
            </ul>
          </div>
        </section>

        <div class="reference-footer">Need another pediatric section? Ping me.</div>
      </div>
    </main>
    <script>
      (function () {
        const ageInput = document.getElementById('pedi-age-input');
        const weightInput = document.getElementById('pedi-weight-input');

        const outputs = {
          estWeight: document.querySelector('[data-output="est-weight"]'),
          estSBP: document.querySelector('[data-output="est-sbp"]'),
          etCuffed: document.querySelector('[data-output="et-cuffed"]'),
          etUncuffed: document.querySelector('[data-output="et-uncuffed"]'),
          palsAtropine: document.querySelector('[data-output="pals-atropine"]'),
          palsAdenosine: document.querySelector('[data-output="pals-adenosine"]'),
          palsEpiCode: document.querySelector('[data-output="pals-epi-code"]'),
          palsLidocaine: document.querySelector('[data-output="pals-lidocaine"]'),
          palsNaloxone: document.querySelector('[data-output="pals-naloxone"]'),
          laneLidocaine: document.querySelector('[data-output="lane-lidocaine"]'),
          laneAtropine: document.querySelector('[data-output="lane-atropine"]'),
          laneNaloxone: document.querySelector('[data-output="lane-naloxone"]'),
          laneEpinephrine: document.querySelector('[data-output="lane-epinephrine"]'),
        };

        const formatNumber = (value, decimals = 2) => {
          if (!isFinite(value)) return '--';
          const fixed = value.toFixed(decimals);
          return Number(fixed).toString();
        };

        const renderRange = (low, high, decimals = 2) => {
          if (!isFinite(low) || !isFinite(high)) return '-- to --';
          return formatNumber(low, decimals) + ' to ' + formatNumber(high, decimals);
        };

        const updateAgeCalcs = () => {
          const age = parseFloat(ageInput.value);
          if (!isFinite(age)) {
            outputs.estWeight.textContent = '--';
            outputs.estSBP.textContent = '--';
            outputs.etCuffed.textContent = '--';
            outputs.etUncuffed.textContent = '--';
            return;
          }
          const estWeight = 2 * age + 8;
          outputs.estWeight.textContent = formatNumber(estWeight, 1);
          outputs.estSBP.textContent = formatNumber(70 + 2 * age, 0);
          outputs.etCuffed.textContent = formatNumber(age / 4 + 3, 1);
          outputs.etUncuffed.textContent = formatNumber(age / 4 + 4, 1);
        };

        const updateWeightCalcs = () => {
          const weight = parseFloat(weightInput.value);
          if (!isFinite(weight)) {
            outputs.palsAtropine.textContent = '--';
            outputs.palsAdenosine.textContent = '-- / --';
            outputs.palsEpiCode.textContent = '--';
            outputs.palsLidocaine.textContent = '--';
            outputs.palsNaloxone.textContent = '--';
            outputs.laneLidocaine.textContent = '-- to --';
            outputs.laneAtropine.textContent = '-- to --';
            outputs.laneNaloxone.textContent = '-- to --';
            outputs.laneEpinephrine.textContent = '--';
            return;
          }
          const atropineDose = Math.min(0.02 * weight, 0.5);
          outputs.palsAtropine.textContent = formatNumber(atropineDose);
          const adenosineFirst = 0.1 * weight;
          const adenosineSecond = 0.2 * weight;
          outputs.palsAdenosine.textContent = formatNumber(adenosineFirst) + ' / ' + formatNumber(adenosineSecond);
          outputs.palsEpiCode.textContent = formatNumber(0.01 * weight);
          outputs.palsLidocaine.textContent = formatNumber(weight);
          outputs.palsNaloxone.textContent = formatNumber(0.1 * weight);
          outputs.laneLidocaine.textContent = renderRange(2 * weight, 3 * weight);
          outputs.laneAtropine.textContent = renderRange(0.04 * weight, 0.06 * weight);
          outputs.laneNaloxone.textContent = renderRange(0.2 * weight, 0.3 * weight);
          outputs.laneEpinephrine.textContent = formatNumber(0.1 * weight);
        };

        ageInput.addEventListener('input', () => {
          updateAgeCalcs();
        });
        weightInput.addEventListener('input', () => {
          updateWeightCalcs();
        });
      })();
    </script>
  </body>
</html>
