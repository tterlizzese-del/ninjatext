<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav>
        <a href="index.html">Home</a> | <a href="about.html">About</a>
    </nav>
    <div class="actions">
        <button id="about-btn" type="button" onclick="window.location.href='about.html'" aria-label="About page">About this site</button>
        <button id="edit-btn" type="button" onclick="toggleEdit()" aria-label="Edit selected instruction">Edit</button>
        <button id="copy-btn" type="button" onclick="copyInstructionLabel()" aria-label="Copy selected instructions">Copy</button>
    </div>
    <h1>Welcome</h1>

    <strong>OTC Pain meds</strong><br>
<form action="">
<input class="instruction" type="checkbox" name="instruction" value="&lt;b&gt;-For mild pain:&lt;/b&gt;">For mild pain<br>

<input class="instruction" type="checkbox" name="instruction" value="Take Tylenol (acetaminophen) 1-2 pills (500-1000 mg) every 6-8 hours. Take no more than 8 pills (4000 mg) in 24 hours ">Tylenol 500/1000<br>

<input class="instruction" type="checkbox" name="instruction" value="Take Motrin (ibuprofen) 400 mg (two 200 mg tablets) or Tylenol (acetaminophen) 500 mg every 6-8 hours. ">Motrin 400 or Tylenol 500<br>

<input class="instruction" type="checkbox" name="instruction" value="&lt;b&gt;-For severe pain:&lt;/b&gt;">For severe pain<br>

<input class="instruction" type="checkbox" name="instruction" value="Take Motrin (ibuprofen) 800 mg (four 200 mg tablets) and Tylenol (acetaminophen) 1000 mg (two 500 mg tablets) every 6-8 hours. You can safely take Motrin and Tylenol together if the pain is severe. ">Motrin 800/ Tylenol 1000<br>

<input class="instruction" type="checkbox" name="instruction" value="Take Aleve (naproxen) 500 mg (two 250 mg tablets) every 12 hours. Take with food and do not take with Motrin (ibuprofen). ">Aleve 500<br>

<input class="instruction" type="checkbox" name="instruction" value="Take Toradol 10 mg every 4-6 hours. You can take up to 40 mg in 24 hours. Take with food. Do not take with Motrin. ">Toradol 10<br>

</form>
        <div id="instruction-label" class="instruction-label" aria-live="polite" role="status"></div>

        <script>
            (function(){
                // helper to decode HTML entities in the value strings
                function decodeHtml(html){
                    const txt = document.createElement('textarea');
                    txt.innerHTML = html;
                    return txt.value;
                }

                        const label = document.getElementById('instruction-label');
                const checkboxes = Array.from(document.querySelectorAll('input.instruction[type="checkbox"]'));
                        const editBtn = document.getElementById('edit-btn');

                        // editing flag: when true, updateLabel will not overwrite the label
                        let editing = false;

                        // toggle edit mode: when editing is true the label becomes editable and checkbox updates are paused
                        window.toggleEdit = function(){
                            editing = !editing;
                            label.contentEditable = editing;
                            if(editing){
                                editBtn.textContent = 'Save';
                                // put caret at end
                                label.focus();
                                document.execCommand('selectAll', false, null);
                                const sel = window.getSelection();
                                if(sel && sel.rangeCount) sel.collapseToEnd();
                            } else {
                                editBtn.textContent = 'Edit';
                            }
                        };

                function updateLabel(){
                    // don't overwrite the label while user is editing it
                    if(editing) return;
                    const checked = checkboxes.filter(c => c.checked);
                    if(checked.length === 0){
                        label.textContent = '';
                        return;
                    }

                    // If only one selected, show it; if many, show a list
                    if(checked.length === 1){
                        label.innerHTML = decodeHtml(checked[0].value);
                    } else {
                        label.innerHTML = checked.map(c => '<div>' + decodeHtml(c.value) + '</div>').join('');
                    }
                }

                        // attach listeners
                        checkboxes.forEach(cb => cb.addEventListener('change', updateLabel));

                        // initialize on load in case some are pre-checked
                        updateLabel();

                        // expose copy function to global scope for the button onclick
                        window.copyInstructionLabel = function(){
                            const text = label.innerText.trim();
                            if(!text){
                                // visual feedback if nothing to copy
                                const b = document.getElementById('copy-btn');
                                const prev = b.textContent;
                                b.textContent = 'Nothing to copy';
                                setTimeout(()=> b.textContent = prev, 1200);
                                return;
                            }

                            // use Clipboard API when available
                            if(navigator.clipboard && navigator.clipboard.writeText){
                                navigator.clipboard.writeText(text).then(()=>{
                                    const b = document.getElementById('copy-btn');
                                    const prev = b.textContent;
                                    b.textContent = 'Copied!';
                                    setTimeout(()=> b.textContent = prev, 1400);
                                }).catch(()=>{
                                    // fallback to textarea method
                                    const ta = document.createElement('textarea');
                                    ta.value = text;
                                    document.body.appendChild(ta);
                                    ta.select();
                                    try{ document.execCommand('copy'); }
                                    finally{ document.body.removeChild(ta); }
                                });
                            } else {
                                // fallback for older browsers
                                const ta = document.createElement('textarea');
                                ta.value = text;
                                document.body.appendChild(ta);
                                ta.select();
                                try{ document.execCommand('copy');
                                    const b = document.getElementById('copy-btn');
                                    const prev = b.textContent;
                                    b.textContent = 'Copied!';
                                    setTimeout(()=> b.textContent = prev, 1400);
                                } finally{ document.body.removeChild(ta); }
                            }
                        };
            })();
        </script>
</body>
</html>